KindEditor.plugin("emoticons",function(a){var c=this,v="emoticons",g=c.emoticonsPath||c.pluginsPath+"emoticons/images/",h=void 0===c.allowPreviewEmoticons?!0:c.allowPreviewEmoticons,k=1;c.clickToolbar(v,function(){function b(v,h,k){v.mouseover(A?function(){h>S?(A.css("left",0),A.css("right","")):(A.css("left",""),A.css("right",0)),B.attr("src",g+k+".gif"),a(this).addClass("ke-on")}:function(){a(this).addClass("ke-on")}),v.mouseout(function(){a(this).removeClass("ke-on")}),v.click(function(e){c.insertHtml('<img src="'+g+k+'.gif" border="0" alt="" />').hideMenu().focus(),e.stop()})}function w(c,v){var h=document.createElement("table");v.append(h),A&&(a(h).mouseover(function(){A.show("block")}),a(h).mouseout(function(){A.hide()}),y.push(a(h))),h.className="ke-table",h.cellPadding=0,h.cellSpacing=0,h.border=0;for(var k=(c-1)*H+j,i=0;M>i;i++)for(var w=h.insertRow(i),C=0;N>C;C++){var P=a(w.insertCell(C));P.addClass("ke-cell"),b(P,C,k);var E=a('<span class="ke-img"></span>').css("background-position","-"+24*k+"px 0px").css("background-image","url("+g+"static.gif)");P.append(E),y.push(P),k++}return h}function C(){a.each(y,function(){this.unbind()})}function P(a,c){a.click(function(e){C(),F.parentNode.removeChild(F),D.remove(),F=w(c,T),E(c),k=c,e.stop()})}function E(c){D=a('<div class="ke-page"></div>'),T.append(D);for(var v=1;K>=v;v++){if(c!==v){var g=a('<a href="javascript:;">['+v+"]</a>");P(g,v),D.append(g),y.push(g)}else D.append(a("@["+v+"]"));D.append(a("@&nbsp;"))}}var M=5,N=9,R=135,j=0,H=M*N,K=Math.ceil(R/H),S=Math.floor(N/2),T=a('<div class="ke-plugin-emoticons"></div>'),y=[],z=c.createMenu({name:v,beforeRemove:function(){C()}});z.div.append(T);var A,B;h&&(A=a('<div class="ke-preview"></div>').css("right",0),B=a('<img class="ke-preview-img" src="'+g+j+'.gif" />'),T.append(A),A.append(B));var D,F=w(k,T);E(k)})});